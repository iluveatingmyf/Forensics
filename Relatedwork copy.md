__Sep24__


分别从用到的特征来区分工作
然后分析他们各自的效用，combine起来有没有意义，互相有没有增益

确实，你没有办法判定root  cause是啥。没有用于验证的ground truth
‘=

Provthing的threat model

网络层能提供事件序列，但是不知道设备本身的状态检测。或者说，设备本身的状态检测
形成state 和event的映射？？？

## 网络级诊断
1）没有考虑到设备本身的状态：生成wireless上下文的时候，只是考虑了event，因为没有考虑runtime的 应用级状态检测，所以没有考虑本身的state？可能造成误报
这个是否有别的扩展呢？2）本质上是基于一些rule去实现特定攻击场景的检测，对于没有规定的异常如何检测、定位、解释呢？ 要提供完整的系统行为+pinpoint出异常的点才可以吧？

## 应用级诊断
1）但没有可以验证获取信息完整性的ground truth吧？一方面第三方应用安装后，又不知道怎么样的dependency是可靠的；另外，应用级事件是可以伪造的，只能陈列具体的事件是什么，没有安全背景的用户咋知道这是anomaly的？
2）假设设备完整性：？只是陈列给你data flow，要么说你收集到的本身就是一个恶意的行为pattern，所以要做异常检测的时候根本无法能够从信息源单一来说明我们溯源的必要性吗？


从两个角度：结合网络信息与应用级信息，或者说溯源的角度，为什么就能考虑到设备本身的状态呢？


## 讨论纪要
1. 侧重点检测优先于溯源目前主要关注的是异常行为的检测，而非溯源（否则需要提供具体实例来说明它解决中的必要性）。可以additional溯源视为附加功能，
2. 强化/细粒度/指纹生成
？指纹生成和匹配规则的制定，具体有什么联系吗？这个规则是双层次互相增强的？能够解决什么问题吗？

针对依赖关系和网络行为生成细粒度指纹是一个有效的策略。需明确如何实现这一点，以及现有指纹技术的优势和不足之处。讨论应包括：
3. 规则基础的故障检测应用级与网络级的规则结合使用，以识别和应对非预期的错误（如恶意应用或被攻陷设备）。需明确以下几点：
    * Bug定义：将Bug定义为非预期交互？如何定义威胁模型？。
    * 非预期交互的识别：通过监控和分析应用行为及网络流量，结合规则引擎自动检测非预期行为。
    * motivating example
如何定义这种跨层的指纹/规则的必要性？用例子说明？
设备（本身状态-网络事件-行为依赖-）





__Sep25__
跨层关联并不难找，问题在于这种跨层关联是帮助解决一个什么问题。
跨层关联能够“状态-事件”验证局部特征的完整性，另外通过依赖关联验证交互级别的时序特性。
是基于建模的一致性检验，还是基于状态预测


## Features
   静态分析+动态日志+网络信息
Questions: 什么时候需要通过引入动态日志来保证检测结果的完整性

例如，这个规则需要规定应用层级本身是什么状态，触发了什么网络网络条件，有什么time-order。这种多维度的来实施更加细粒度的挑战。然后还能溯源。

我觉得网络信息的加入就是能够帮助发现compromised的设备节点，扩展了原本的安全问题空间  
挑战：如何保证检测结果的完整性（这个完整性如何定义）？ 检测结果具备不确定性？ 为什么（静态分析+动态日志+网络信息）能够进一步达成完整性。因为（）检测需要设备状态的上下文和规则的执行状态。？？ 还有没有更深刻的观点？？
CRT-mining能不能解决？ 加入了动态的应用逻辑，能不能不要用所谓的规则来实现crt-mining，或者有没有因为网络层的加入有更细粒度的发现？

通过iot上下文和 网络上下文匹配结果，来制定一些特定攻击场景的检测规则，比如 fake event、event interception、over-privilege、command failure。


enhancement：
1. 在解释系统的同时，pinpoint出具体的compromised的节点
2. 解释单一层级难以检测到的异常问题？有一些攻击就是通过一些正常的行为模式来检测
比如有一个攻击者，知道具体的行为pattern，通过伪造了设备的状态在，进行fake state的攻击，然后触发了影响了规则之间的交互问题

3. 


2.针对依赖和网络行为生成一个强化/细粒度的指纹。我觉得这说的很有道理啊？。。 就是怎么要说这个东西呢？
现有的fingerprinting各种角度对比，有什么优势？
challenge？ limitations？contribution？？
3.rule-based找bug（应用级），增加网络级的规则，两个一起去发一些非预期的bug（恶意应用/compromised设备）。Bug如何定义？是非预期的交互？这个交互可以是应用级也可以是网络级？

现有工作在Normality建模的粒度不足。能够捕获到跨层次的复杂异常模式。更为精确，并且提高了解释性。
多层次指纹方法可能覆盖更广泛的异常类型，包括一些难以预测的异常。 
比如这种指纹可以通过similarly对检测进行更为
指纹比对方法可以更好地捕捉复杂的上下文关系。
状态预测方法可能难以处理复杂的上下文依赖。



## 今日plan
1. 查看anomaly detection的paper，结合我们的工作基础，定义，这个bug是什么？
    Answer
2. 所谓的细粒度指纹，和现有的指纹工作相比有什么增益？这种rule-based的异常检测，对比其他各种领域的异常检测，有什么区别？



## 对手能力

我们假设对手可以对目标智能家居发起**设备针对性攻击**和**平台基础攻击**
- 设备针对性攻击，我们主要关注感染IP设备的物联网恶意软件（如Mirai）以及源自被攻陷的物联网设备的僵尸网络相关攻击（如DDoS、扫描）。虽然大多数家庭网络目前放置在NAT路由器后面，从而让内部的物联网设备得到了一定程度的保护，但研究人员发现家庭路由器也是物联网恶意软件的主要目标，这可能成为感染其他物联网设备的可行跳板
- 平台基础攻击，我们假设对手能够利用物联网应用或自动化平台发起攻击，例如命令拦截和命令注入，这些攻击可以针对IP设备和低功耗设备。此外，虚假命令可能会触发某些设备的不良动作，这些影响可能通过物理环境进一步引发其他设备的意外动作。我们不假设对手能够访问局域网，因为家庭Wi-Fi网络可以通过WPA认证进行保护。



## Related Work
SeIoT: Detecting Anomalous Semantics in Smart Homes via Knowledge Graph(2024' TIFS)

- Motivation:
    1. 获取正常性可能很困难甚至不切实际，需要提供物联网设备的合法网络配置文件,需要访问物联网应用程序的源代码或获得与自动化平台的授权集成以获取系统日志，这只能在有限的开源平台上使用（例如 Samsung SmartThings），但不适用于大多数其他平台。
    2. 正常的异构性，尤其是源自当前多功能物联网设备的异构性，使得对正常行为进行建模比对过时的单功能设备更加困难。例如，IP 摄像机的视频流流量模式（即高速率、持续性）与同一摄像机的空闲状态（即低速率、周期性）可能截然不同。
    3. 正态性的表示有限，主要依赖于流级或主机级行为的欧几里得空间特征（例如，网络流量和事件的统计数据），这可能不足以感知某些攻击，尤其是基于平台的攻击。由于这些攻击可能源于通过看似“合法”的流量滥用自动化平台，因此，如果不充分考虑物联网设备之间或设备与物理环境之间的交互，仅使用单个设备的行为模式很难识别它们。


- Insights:
    - 时间相关的异常检测：例如 DDoS、扫描,在IoT 流量中表征为对时间相关语义的破坏
    - 交互相关的异常检测：同时针对针对设备和平台的攻击。

这个东西和我们昨天讨论的东西很像。区分度？
会随着时间去更新KG上节点的值，
两类特征来量化描述KG：
- always-on：终端之间持续通信的时间相关语义（idle流量的频次）
- trigger-action：设备交互相关的语意义
        - 设备节点（Device ID，之前的状态和当前状态）每当一个action被识别了，设备状态会转变；
        - 环境节点：
方法：


- **设备状态异常检测**：
    1. 使用环境属性作为媒介，在目标设备与其他相关设备之间建立连接。
    2. 检测过程以知识图谱为输入，该图谱包含IoT设备的状态和相应的环境属性E
    3. 系统输出所有预测的设备状态。如果预测状态与当前状态不同，则将该设备归类为恶意。
    *优势*： 支持细粒度的节点级检测，能够**精确定位异常**。SeIoT可以标记出现异常的房间、相关的环境属性和相关的IoT设备，为用户提供二次检查的机会。

- **环境状态异常检测**：
    1. 使用设备状态作为媒介，在环境属性之间建立连接
    2. 可以通过反转设备状态异常检测的元路径来获得元路径，格式为envir→dev→envir
    我们在训练阶段应用FS-HAN来建模环境，并在检测阶段预测环境属性值。如果预测值与实际当前值之间的差距超过阈值，则判定为恶意。

**本质上是通过网络层推测的事件序列，将关联设备通过KG的形式表达，训练输出下一步系统状态的预测，然后比对实现一致性检测判定异常**

- Limitations:
    1. 缺少具体的自动化规则之间的交互语义？ 缺少“描述-应用”的检测，以及非预期的行为交互检测
    2. 对Normality的建模粒度并不够？
    3. 
- 区别

- 问题：
    1. 为什么这种方法没有办法保证检测结果的完整性呢？
        主要依赖于历史数据和已知的正常行为模式进行预测
        忽视长期依赖关系或者复杂的时序模式，就要有长期影响的异常。这种需要应用级别的长期依赖
    2. 


现有的 Rule-based 对于Normality的建模粒度不够（Correlation缺少？）
- 通过similarity来解决正常性
Prediction-based：忽视长期依赖关系或者复杂的时序模式，

通过程序知识，网络知识还有日志进行多重验证建模？
我不建模，直接制定规则。这种多维度的规则比建模更加flexible
similarity到底对比的是什么similarly



